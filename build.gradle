
task wmsJson(type:Exec){
    workingDir 'pipemock/trafo_sql/wms'
    commandLine './tojson.sh'
}

task printJson(type:Exec){
    workingDir 'pipemock/trafo_sql/qwc_print'
    commandLine './tojson.sh'
}

task wfsJson(type:Exec){
    workingDir 'pipemock/trafo_sql/wfs'
    commandLine './tojson.sh'
}

task qDown(type:Exec){
    workingDir 'qgs_clust'
    commandLine 'docker-compose','down'
    ignoreExitValue true
}

task wmsQgs(type:Exec){
    dependsOn wmsJson
    workingDir 'pipemock/jqgs'
    commandLine './toWmsQgs.sh'
}

task printQgs(type:Exec){
    dependsOn printJson
    workingDir 'pipemock/jqgs'
    commandLine './toPrintQgs.sh'
}

task wfsQgs(type:Exec){
    dependsOn wfsJson
    workingDir 'pipemock/jqgs'
    commandLine './toWfsQgs.sh'
}

task qUp(type:Exec){
    dependsOn wmsQgs
    dependsOn printQgs
    dependsOn wfsQgs
    dependsOn qDown
    workingDir 'qgs_clust'
    commandLine 'docker-compose','up','-d'
}
